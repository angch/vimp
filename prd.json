{
    "project": "Vimp",
    "branchName": "ralph/phase-3-porting",
    "description": "Phase 3 begins the porting process by implementing a 'Zig Eraser Tool' that inherits from the C GimpBrushTool. This proves Zig can subclass complex GObject hierarchies while maintaining binary compatibility.",
    "userStories": [
        {
            "id": "US-001",
            "title": "Zig Bindings for Tool Hierarchy",
            "description": "As a developer, I need Zig struct definitions that match the C memory layout of GimpTool, GimpPaintTool, and GimpBrushTool so I can inherit from them.",
            "acceptanceCriteria": [
                "src/gimp/tool.zig defines GimpTool and GimpToolClass extern structs",
                "src/gimp/paint_tool.zig defines GimpPaintTool layout",
                "Offsets of fields in Zig match C (verified via extern or runtime assertions)",
                "Typecheck passes"
            ],
            "priority": 1,
            "passes": true,
            "notes": ""
        },
        {
            "id": "US-002",
            "title": "Zig GObject Registration",
            "description": "As a developer, I want to register a new GType GimpZigEraserTool from Zig code that the C GObject system recognizes.",
            "acceptanceCriteria": [
                "Zig function gimp_zig_eraser_tool_get_type() returns a valid GType",
                "class_init and instance_init functions are implemented in Zig and called by GObject",
                "The type is derived from GIMP_TYPE_BRUSH_TOOL (or appropriate parent)",
                "Typecheck passes"
            ],
            "priority": 2,
            "passes": false,
            "notes": ""
        },
        {
            "id": "US-003",
            "title": "VTable Overriding in Zig",
            "description": "As a developer, I want to override button_press and motion virtual methods in Zig to define custom behavior.",
            "acceptanceCriteria": [
                "In class_init, the GimpToolClass.button_press function pointer is swapped for a Zig function",
                "When the tool is selected and used, the Zig function prints a debug message or executes logic",
                "parent_class methods can be called from Zig (chaining up)",
                "Typecheck passes"
            ],
            "priority": 3,
            "passes": false,
            "notes": ""
        },
        {
            "id": "US-004",
            "title": "Functional Eraser Logic",
            "description": "As a user, I want the Zig Eraser to actually erase pixels on the canvas.",
            "acceptanceCriteria": [
                "Implement GimpPaintToolClass.is_alpha_only in Zig",
                "Reuse gimp_brush_tool logic or implement custom painting logic (via GEGL graph manipulation)",
                "Verify in browser (if UI capable) or via unit test that pixels are modified",
                "Typecheck passes"
            ],
            "priority": 4,
            "passes": false,
            "notes": ""
        },
        {
            "id": "US-005",
            "title": "Register Tool in Tool Manager",
            "description": "As a user, I want to see 'Zig Eraser' in the toolbar.",
            "acceptanceCriteria": [
                "Call gimp_tool_register (or equivalent) to add the new tool to the registry",
                "Assign an icon (reuse existing Eraser icon)",
                "Tool appears in the UI and can be selected",
                "Typecheck passes",
                "Verify in browser using dev-browser skill"
            ],
            "priority": 5,
            "passes": false,
            "notes": ""
        }
    ]
}